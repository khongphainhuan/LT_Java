<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Chi tiết hồ sơ</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; background-color: #f5f8ff; }
  </style>
</head>
<body>
  <div class="d-flex">
    <!-- Sidebar -->
    <div th:replace="/fragments/sidebar :: sidebar"></div>

    <!-- Main Content -->
    <div class="flex-grow-1 d-flex flex-column">
      <!-- Header -->
      <div th:replace="/fragments/header :: header"></div>

      <main class="p-4">
        <h4 class="fw-bold text-primary mb-4"><i class="bi bi-file-earmark-text"></i> Chi tiết hồ sơ</h4>
        
        <div class="card shadow-sm border-0">
          <div class="card-body">
            <!-- Thông tin hồ sơ -->
            <p><strong>Mã hồ sơ:</strong> <span id="application-id">--</span></p>
            <p><strong>Công dân:</strong> <span id="citizen-name">--</span></p>
            <p><strong>Dịch vụ:</strong> <span id="service-name">--</span></p>
            <p><strong>Ngày nộp:</strong> <span id="submit-date">--</span></p>
            <hr>

            <!-- Form cập nhật -->
            <form id="update-form">
              <div class="mb-3">
                <label class="form-label">Trạng thái</label>
                <select class="form-select" id="status" name="status">
                  <option value="processing">Đang xử lý</option>
                  <option value="completed">Hoàn tất</option>
                  <option value="needs_supplement">Cần bổ sung</option>
                </select>
              </div>
              <div class="mb-3">
                <label class="form-label">Ghi chú</label>
                <textarea class="form-control" id="note" name="note" rows="3"></textarea>
              </div>
              <button type="submit" class="btn btn-primary"><i class="bi bi-save"></i> Cập nhật</button>
              <a href="/staff/applications.html" class="btn btn-secondary">Quay lại</a>
            </form>
          </div>
        </div>
      </main>

      <!-- Footer -->
      <div th:replace="/fragments/footer :: footer"></div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const token = localStorage.getItem('token');
      if (!token) {
        window.location.href = '/login.html';
        return;
      }
      // Load application data
      loadApplicationDetail();
    });

    async function loadApplicationDetail() {
      // Simulate loading application data
      document.getElementById('application-id').textContent = 'HS001';
      document.getElementById('citizen-name').textContent = 'Nguyễn Văn A';
      document.getElementById('service-name').textContent = 'Cấp đổi CCCD';
      document.getElementById('submit-date').textContent = new Date().toLocaleDateString('vi-VN');
    }

    document.getElementById('update-form').addEventListener('submit', async function(e) {
      e.preventDefault();
      // Handle form submission
      alert('Cập nhật thành công!');
    });
  </script>
</body>
</html>